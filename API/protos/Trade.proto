syntax = "proto3";

package Need4Protocol;

import "google/protobuf/empty.proto";
import "google/protobuf/wrappers.proto";
import "protos/ActionResponse.proto";
import "protos/Item.proto";

service TradeService {
	rpc CreateTrade (Trade) returns (ActionResponse);
	rpc GetOpenTrades (google.protobuf.Empty) returns (TradeList);
	rpc GetDetailedTradeView (google.protobuf.Int32Value) returns (Trade);
}

message TradeList {
	repeated Trade trade_list = 1;
}

message Trade {
	int32 id = 1;
    T_Timestamp started = 2;
	repeated TradeItemDetails trade_items_list = 3;
}

message TradeItemDetails {
	int32 id = 1;
	Item item = 2;
	int32 need_offset = 3;
	int32 fulfilled_quantity = 4;
}

message TradeActionList {
	int32 id = 1;
	repeated TradeAction action = 2;
}

message TradeAction {
	int32 id = 1;
	string description = 2;
	string method_rest_signature = 3;
}

message T_Timestamp {
	int32 id = 1;
	int32 year = 2;
	int32 month = 3;
	int32 day = 4;
	int32 hour = 5;
	int32 minute = 6;
	int32 second = 7;
}
